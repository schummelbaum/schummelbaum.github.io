<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>VoiceNote - Fast Notes and Emails, Spoken</title>
    <link href="VoiceNote.ico" rel="icon" type="image/x-icon" />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        primary: "#FF3B30",
                        "primary-hover": "#D93026",
                        "background-light": "#F3F4F6",
                        "background-dark": "#121212",
                        "surface-light": "#FFFFFF",
                        "surface-dark": "#1E1E1E",
                        "surface-darker": "#181818",
                        "border-light": "#E5E7EB",
                        "border-dark": "#333333",
                    },
                    fontFamily: {
                        display: ["Inter", "sans-serif"],
                        body: ["Inter", "sans-serif"],
                    },
                    borderRadius: {
                        DEFAULT: "0.5rem",
                        'xl': "0.75rem",
                        '2xl': "1rem",
                    },
                    boxShadow: {
                        'glow': '0 0 20px rgba(255, 59, 48, 0.3)',
                        'glow-sm': '0 0 10px rgba(255, 59, 48, 0.2)',
                    }
                },
            },
        };
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        .waveform-bar {
            animation: waveform 1s ease-in-out infinite;
        }

        @keyframes waveform {

            0%,
            100% {
                height: 20%;
            }

            50% {
                height: 100%;
            }
        }

        .waveform-bar:nth-child(odd) {
            animation-duration: 0.8s;
        }

        .waveform-bar:nth-child(even) {
            animation-duration: 1.2s;
        }

        .glass-panel {
            background: rgba(30, 30, 30, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .light .glass-panel {
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        .material-symbols-outlined {
            font-variation-settings:
                'FILL' 0,
                'wght' 300,
                'GRAD' 0,
                'opsz' 24
        }

        .hero-grid-pattern {
            position: absolute;
            inset: 0;
            pointer-events: none;
            background-image:
                linear-gradient(rgba(100, 116, 139, 0.18) 1px, transparent 1px),
                linear-gradient(90deg, rgba(100, 116, 139, 0.18) 1px, transparent 1px);
            background-size: 34px 34px;
            -webkit-mask-image: radial-gradient(circle at 50% 20%, rgba(0, 0, 0, 0.85), rgba(0, 0, 0, 0.35) 68%, transparent 100%);
            mask-image: radial-gradient(circle at 50% 20%, rgba(0, 0, 0, 0.85), rgba(0, 0, 0, 0.35) 68%, transparent 100%);
            animation: hero-grid-drift 32s linear infinite;
        }

        .dark .hero-grid-pattern {
            background-image:
                linear-gradient(rgba(148, 163, 184, 0.14) 1px, transparent 1px),
                linear-gradient(90deg, rgba(148, 163, 184, 0.14) 1px, transparent 1px);
        }

        .hero-ambient-orb {
            animation: hero-orb-float 12s ease-in-out infinite;
        }

        .hero-grid-fade {
            position: absolute;
            left: 0;
            right: 0;
            bottom: 0;
            height: clamp(120px, 22vh, 260px);
            pointer-events: none;
            z-index: 1;
            background: linear-gradient(180deg, rgba(243, 244, 246, 0) 0%, rgba(243, 244, 246, 0.48) 56%, rgba(243, 244, 246, 0.84) 82%, #f3f4f6 100%);
        }

        .dark .hero-grid-fade {
            background: linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(18, 18, 18, 0.46) 56%, rgba(18, 18, 18, 0.84) 82%, #121212 100%);
        }

        [data-reveal] {
            --reveal-offset-x: 0px;
            --reveal-offset-y: 28px;
            --reveal-scale: 0.985;
            opacity: 0;
            transform: translate3d(var(--reveal-offset-x), var(--reveal-offset-y), 0) scale(var(--reveal-scale));
            filter: blur(8px);
            transition:
                opacity 700ms cubic-bezier(0.22, 1, 0.36, 1),
                transform 800ms cubic-bezier(0.22, 1, 0.36, 1),
                filter 800ms cubic-bezier(0.22, 1, 0.36, 1);
            transition-delay: calc(var(--reveal-order, 0) * 90ms);
            will-change: opacity, transform, filter;
        }

        [data-reveal="left"] {
            --reveal-offset-x: -34px;
            --reveal-offset-y: 0px;
        }

        [data-reveal="right"] {
            --reveal-offset-x: 34px;
            --reveal-offset-y: 0px;
        }

        [data-reveal="up"] {
            --reveal-offset-y: 30px;
        }

        [data-reveal="zoom"] {
            --reveal-offset-y: 16px;
            --reveal-scale: 0.94;
        }

        [data-reveal].is-visible {
            opacity: 1;
            transform: translate3d(0, 0, 0) scale(1);
            filter: blur(0);
        }

        .vn-preview-shell {
            position: relative;
            text-align: left;
        }

        #preview[data-reveal].is-visible {
            transform: none;
        }

        .vn-preview-stage {
            position: relative;
            width: min(100%, 360px);
            margin: 0 auto;
            text-align: left;
        }

        .vn-preview-stage--app {
            min-height: 0;
            padding-bottom: 0;
        }

        .vn-app-window {
            position: relative;
            width: min(100%, 320px);
            height: 560px;
            margin: 0 auto;
            z-index: 2;
        }

        .vn-app-shell {
            position: relative;
            width: 100%;
            height: 100%;
            border-radius: 14px;
            border: 1px solid rgba(58, 58, 58, 0.92);
            background: #202020;
            overflow: hidden;
            box-shadow:
                0 24px 48px rgba(0, 0, 0, 0.45),
                inset 0 0 0 1px rgba(255, 255, 255, 0.03);
        }

        .vn-main-panel {
            position: relative;
            z-index: 2;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            min-height: 0;
        }

        .vn-gear-button {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 32px;
            height: 32px;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.06);
            color: #9ca3af;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 7;
        }

        .vn-gear-button:hover {
            background: rgba(255, 255, 255, 0.12);
            color: #ffffff;
        }

        .vn-mic-header {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding-top: 28px;
            padding-bottom: 8px;
        }

        .vn-mic-button {
            position: relative;
            width: 76px;
            height: 76px;
            border-radius: 999px;
            border: 1px solid rgba(255, 255, 255, 0.10);
            background: #3a3a3a;
            color: #ef4444;
            box-shadow: 0 12px 22px rgba(0, 0, 0, 0.35);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 120ms ease, background 120ms ease, border-color 120ms ease, color 120ms ease;
        }

        .vn-mic-button::before {
            content: "";
            position: absolute;
            inset: -12px;
            border-radius: 999px;
            background: rgba(239, 68, 68, 0.26);
            opacity: 0;
            transform: scale(0.8);
            pointer-events: none;
        }

        .vn-mic-button:hover {
            transform: scale(1.04);
            border-color: rgba(239, 68, 68, 0.24);
            background: #444444;
        }

        .vn-mic-icon {
            position: absolute;
            font-size: 32px;
            line-height: 1;
            opacity: 0;
            transition: opacity 120ms ease;
        }

        .vn-mic-spinner {
            position: absolute;
            width: 36px;
            height: 36px;
            display: none;
            pointer-events: none;
            --vn-spinner-r: 203, 213, 225;
            --vn-spinner-spoke-width: 2.8px;
            --vn-spinner-spoke-height: 10px;
            --vn-spinner-spoke-top: 2px;
            --vn-spinner-spoke-left: 16.6px;
            --vn-spinner-spoke-origin: 16px;
        }

        .vn-recording-label {
            margin: 10px 0 0;
            font-size: 12px;
            font-weight: 500;
            color: #7f858c;
            letter-spacing: 0.2px;
            line-height: 1.1;
        }

        .vn-history-section {
            flex: 1;
            min-height: 0;
            display: flex;
            flex-direction: column;
            gap: 10px;
            padding: 2px 10px 0px;
        }

        .vn-history-header {
            min-height: 30px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: #c7c7c7;
            font-size: 12px;
            font-weight: 600;
            letter-spacing: 0.6px;
            text-transform: uppercase;
        }

        .vn-history-list {
            flex: 1;
            min-height: 0;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
            padding: 0 0 10px;
        }

        .vn-history-list>.vn-history-card {
            align-self: stretch;
        }

        .vn-history-card {
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            background: rgba(45, 45, 45, 0.55);
            box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.03);
            padding: 10px;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .vn-history-card.is-recent {
            border-color: rgba(239, 68, 68, 0.4);
            box-shadow:
                inset 0 0 0 1px rgba(239, 68, 68, 0.14),
                0 10px 18px rgba(0, 0, 0, 0.18);
        }

        .vn-history-card-top {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
        }

        .vn-history-time {
            font-size: 11px;
            color: #7f858c;
            font-weight: 600;
        }

        .vn-history-actions {
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .vn-history-action {
            width: 26px;
            height: 26px;
            border-radius: 6px;
            border: 1px solid transparent;
            background: transparent;
            color: #8f96a1;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            padding: 0;
            transition: background 140ms ease, color 140ms ease, border-color 140ms ease;
        }

        .vn-history-action .material-symbols-outlined {
            font-size: 16px;
            line-height: 1;
        }

        .vn-history-action:hover {
            color: #e5e7eb;
            background: rgba(255, 255, 255, 0.08);
        }

        .vn-history-action:focus-visible {
            outline: none;
            border-color: rgba(239, 68, 68, 0.5);
            box-shadow: 0 0 0 2px rgba(239, 68, 68, 0.14);
        }

        .vn-history-action--delete:hover {
            color: #fda4af;
            background: rgba(239, 68, 68, 0.18);
        }

        .vn-history-action--copy.is-copied {
            color: #fecaca;
            background: rgba(239, 68, 68, 0.22);
            border-color: rgba(239, 68, 68, 0.45);
        }

        .vn-history-text {
            margin: 0;
            font-size: 13px;
            line-height: 1.35;
            color: #a3a8af;
            min-height: calc(1.35em * 2);
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-align: left;
        }

        .vn-settings-overlay {
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, 0.32);
            opacity: 0;
            pointer-events: none;
            transition: opacity 160ms ease;
            z-index: 4;
        }

        .vn-settings-sidebar {
            width: 250px;
            position: absolute;
            right: 0;
            top: 0;
            bottom: 0;
            transform: translateX(104%);
            transition: transform 180ms ease;
            background: rgba(25, 25, 25, 0.76);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-left: 1px solid rgba(255, 255, 255, 0.05);
            z-index: 5;
            display: flex;
            flex-direction: column;
            min-height: 0;
        }

        .vn-settings-header {
            min-height: 58px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 14px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .vn-settings-title {
            margin: 0;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            font-weight: 600;
            color: #c7c7c7;
            letter-spacing: 0.6px;
            text-transform: uppercase;
        }

        .vn-settings-close {
            border: 1px solid rgba(255, 255, 255, 0.08);
            background: rgba(255, 255, 255, 0.06);
            color: #bfc5cc;
            border-radius: 6px;
            padding: 6px 8px;
            width: 28px;
            height: 28px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .vn-settings-close:hover {
            background: rgba(255, 255, 255, 0.12);
            color: #ffffff;
        }

        .vn-settings-list {
            flex: 1;
            min-height: 0;
            overflow-y: auto;
            padding: 10px;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .vn-settings-version-footer {
            margin-top: 2px;
            padding: 2px 2px 2px 4px;
            display: flex;
            justify-content: flex-start;
        }

        .vn-settings-version-text {
            font-size: 10px;
            line-height: 1.3;
            color: rgba(156, 163, 175, 0.84);
            letter-spacing: 0.16px;
            user-select: none;
        }

        .vn-setting-item {
            display: flex;
            flex-direction: column;
            gap: 8px;
            padding: 10px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.04);
        }

        .vn-setting-title {
            font-size: 12px;
            font-weight: 600;
            color: #d1d5db;
            line-height: 1.2;
        }

        .vn-setting-help {
            font-size: 11px;
            color: #8a9098;
            line-height: 1.3;
        }

        .vn-setting-field {
            min-height: 34px;
            border: 1px solid rgba(255, 255, 255, 0.14);
            border-radius: 6px;
            background: rgba(20, 20, 20, 0.45);
            color: #e5e7eb;
            font-size: 12px;
            padding: 0 10px;
            display: inline-flex;
            align-items: center;
            justify-content: space-between;
            gap: 8px;
            text-align: left;
            user-select: none;
        }

        .vn-setting-copy {
            min-width: 0;
            display: flex;
            flex-direction: column;
            gap: 3px;
        }

        .vn-setting-title,
        .vn-setting-help {
            text-align: left;
        }

        .vn-setting-combo {
            position: relative;
        }

        .vn-setting-combo-button {
            width: 100%;
            min-height: 34px;
            border: 1px solid rgba(255, 255, 255, 0.14);
            border-radius: 6px;
            background: rgba(20, 20, 20, 0.45);
            color: #e5e7eb;
            font-size: 12px;
            padding: 0 10px;
            display: inline-flex;
            align-items: center;
            justify-content: space-between;
            gap: 8px;
            cursor: pointer;
            outline: none;
            text-align: left;
        }

        .vn-setting-combo-button:hover {
            background: rgba(30, 30, 30, 0.58);
        }

        .vn-setting-combo-button:focus-visible,
        .vn-setting-combo.open .vn-setting-combo-button {
            border-color: rgba(239, 68, 68, 0.45);
            box-shadow: 0 0 0 2px rgba(239, 68, 68, 0.14);
        }

        .vn-setting-combo-button .material-symbols-outlined {
            font-size: 18px;
            color: #9ca3af;
        }

        .vn-setting-combo-menu {
            position: absolute;
            top: calc(100% + 6px);
            left: 0;
            right: 0;
            border: 1px solid rgba(255, 255, 255, 0.14);
            border-radius: 8px;
            background: #2d2d2d;
            box-shadow: 0 12px 28px rgba(0, 0, 0, 0.45);
            padding: 6px;
            display: none;
            z-index: 80;
            max-height: 220px;
            overflow-y: auto;
            overscroll-behavior: contain;
        }

        .vn-setting-combo.open .vn-setting-combo-menu {
            display: block;
        }

        .vn-setting-combo-option {
            width: 100%;
            border: none;
            background: #2d2d2d;
            color: #d1d5db;
            font-size: 12px;
            min-height: 30px;
            padding: 0 8px;
            text-align: left;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 8px;
            border-radius: 6px;
            cursor: pointer;
        }

        .vn-setting-combo-option:hover,
        .vn-setting-combo-option:focus-visible {
            outline: none;
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
        }

        .vn-setting-combo-option.is-selected {
            background: rgba(239, 68, 68, 0.2);
            color: #fecaca;
        }

        .vn-setting-toggle {
            flex-direction: row;
            justify-content: space-between;
            align-items: center;
        }

        .vn-setting-switch {
            position: relative;
            width: 42px;
            height: 24px;
            flex-shrink: 0;
            cursor: pointer;
        }

        .vn-setting-switch input {
            position: absolute;
            opacity: 0;
            pointer-events: none;
        }

        .vn-setting-switch-slider {
            position: absolute;
            inset: 0;
            border-radius: 999px;
            background: rgba(255, 255, 255, 0.18);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: background 120ms ease, border-color 120ms ease;
        }

        .vn-setting-switch-slider::before {
            content: "";
            position: absolute;
            left: 3px;
            top: 3px;
            width: 16px;
            height: 16px;
            border-radius: 999px;
            background: #e5e7eb;
            transition: transform 120ms ease;
        }

        .vn-setting-switch input:checked+.vn-setting-switch-slider {
            background: rgba(239, 68, 68, 0.36);
            border-color: rgba(239, 68, 68, 0.55);
        }

        .vn-setting-switch input:checked+.vn-setting-switch-slider::before {
            transform: translateX(18px);
        }

        .vn-setting-switch input:focus-visible+.vn-setting-switch-slider {
            box-shadow: 0 0 0 2px rgba(239, 68, 68, 0.16);
        }

        .vn-flyout-frame {
            position: relative;
            width: 151px;
            height: 46px;
            margin: 0 auto;
            opacity: 1;
            transform: translateY(0) scale(1);
            transition:
                width 190ms cubic-bezier(0.22, 1, 0.36, 1),
                opacity 220ms cubic-bezier(0.22, 1, 0.36, 1),
                transform 220ms cubic-bezier(0.22, 1, 0.36, 1);
            z-index: 3;
        }

        .vn-flyout-pill {
            position: absolute;
            inset: 8px;
            border-radius: 17px;
            border: 1px solid #3a3a3a;
            background: #171717;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 0 5px;
            box-shadow:
                inset 0 0 0 1px rgba(255, 255, 255, 0.03),
                0 12px 20px rgba(0, 0, 0, 0.22),
                0 5px 8px rgba(0, 0, 0, 0.3);
            transition: background 160ms ease, border-color 160ms ease, padding 160ms ease;
        }

        .vn-fly-btn {
            width: 20px;
            height: 20px;
            border-radius: 999px;
            border: 1px solid transparent;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0;
            flex-shrink: 0;
            cursor: pointer;
        }

        .vn-fly-btn .material-symbols-outlined {
            font-size: 14px;
            line-height: 1;
        }

        .vn-fly-btn-close {
            background: rgba(255, 255, 255, 0.14);
            color: rgba(236, 236, 236, 0.86);
        }

        .vn-fly-btn-finish {
            background: rgba(248, 83, 83, 0.38);
            border-color: rgba(248, 83, 83, 0.78);
            color: rgba(255, 255, 255, 0.95);
        }

        .vn-fly-wave {
            width: 46px;
            height: 16px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 2px;
            flex-shrink: 0;
        }

        .vn-fly-wave-bar {
            width: 2px;
            height: 2px;
            border-radius: 1.2px;
            background: rgba(174, 174, 174, 0.55);
            flex-shrink: 0;
        }

        .vn-fly-timer {
            width: 24px;
            text-align: center;
            font-family: Cambria, "Times New Roman", serif;
            font-size: 12px;
            font-weight: 600;
            line-height: 1;
            color: rgba(205, 205, 205, 0.74);
            letter-spacing: 0;
            flex-shrink: 0;
        }

        .vn-fly-spinner {
            width: 22px;
            height: 22px;
            position: relative;
            display: none;
            flex-shrink: 0;
            --vn-spinner-r: 203, 213, 225;
            --vn-spinner-spoke-width: 2.2px;
            --vn-spinner-spoke-height: 6px;
            --vn-spinner-spoke-top: 2px;
            --vn-spinner-spoke-left: 9.9px;
            --vn-spinner-spoke-origin: 9px;
        }

        .vn-mic-spinner span,
        .vn-fly-spinner span {
            position: absolute;
            top: var(--vn-spinner-spoke-top);
            left: var(--vn-spinner-spoke-left);
            width: var(--vn-spinner-spoke-width);
            height: var(--vn-spinner-spoke-height);
            border-radius: 999px;
            background: rgba(var(--vn-spinner-r), 0.20);
            transform-origin: 50% var(--vn-spinner-spoke-origin);
            opacity: 1;
            box-shadow: none;
        }

        .vn-mic-spinner span:nth-child(1),
        .vn-fly-spinner span:nth-child(1) {
            transform: rotate(0deg);
        }

        .vn-mic-spinner span:nth-child(2),
        .vn-fly-spinner span:nth-child(2) {
            transform: rotate(45deg);
        }

        .vn-mic-spinner span:nth-child(3),
        .vn-fly-spinner span:nth-child(3) {
            transform: rotate(90deg);
        }

        .vn-mic-spinner span:nth-child(4),
        .vn-fly-spinner span:nth-child(4) {
            transform: rotate(135deg);
        }

        .vn-mic-spinner span:nth-child(5),
        .vn-fly-spinner span:nth-child(5) {
            transform: rotate(180deg);
        }

        .vn-mic-spinner span:nth-child(6),
        .vn-fly-spinner span:nth-child(6) {
            transform: rotate(225deg);
        }

        .vn-mic-spinner span:nth-child(7),
        .vn-fly-spinner span:nth-child(7) {
            transform: rotate(270deg);
        }

        .vn-mic-spinner span:nth-child(8),
        .vn-fly-spinner span:nth-child(8) {
            transform: rotate(315deg);
        }

        .vn-settings-list::-webkit-scrollbar,
        .vn-setting-combo-menu::-webkit-scrollbar {
            width: 4px;
        }

        .vn-settings-list,
        .vn-setting-combo-menu {
            scrollbar-width: thin;
            scrollbar-color: rgba(255, 255, 255, 0.24) transparent;
        }

        .vn-settings-list::-webkit-scrollbar-track,
        .vn-setting-combo-menu::-webkit-scrollbar-track {
            background: transparent;
        }

        .vn-settings-list::-webkit-scrollbar-thumb,
        .vn-setting-combo-menu::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.14);
            border-radius: 12px;
        }

        .vn-settings-list::-webkit-scrollbar-thumb:hover,
        .vn-setting-combo-menu::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.24);
        }

        #vn-app-preview[data-state="idle"] .vn-mic-idle {
            opacity: 1;
        }

        #vn-app-preview[data-state="listening"] .vn-mic-listening {
            opacity: 1;
        }

        #vn-app-preview[data-state="listening"] .vn-mic-button {
            border-color: rgba(239, 68, 68, 0.46);
            background: #442626;
            color: #f87171;
        }

        #vn-app-preview[data-state="listening"] .vn-mic-button::before {
            animation: vn-mic-ring 1.25s ease-out infinite;
        }

        #vn-app-preview[data-state="listening"] .vn-recording-label {
            color: rgba(248, 86, 86, 0.98);
        }

        #vn-flyout-preview[data-state="listening"] .vn-fly-timer {
            color: rgba(248, 86, 86, 0.98);
        }

        #vn-flyout-preview[data-state="listening"] .vn-flyout-frame,
        #vn-flyout-preview[data-state="transcribing"] .vn-flyout-frame {
            opacity: 1;
            transform: translateY(0) scale(1);
            pointer-events: auto;
        }

        #vn-flyout-preview[data-state="listening"] .vn-fly-wave-bar {
            background: rgba(248, 86, 86, 0.92);
        }

        #vn-app-preview[data-state="transcribing"] .vn-mic-button {
            border-color: rgba(148, 163, 184, 0.34);
            background: #303640;
            color: #dbe4ef;
        }

        #vn-app-preview[data-state="transcribing"] .vn-mic-spinner {
            display: block;
        }

        #vn-app-preview[data-state="transcribing"] .vn-recording-label {
            color: #dbe4ef;
            animation: vn-processing-pulse 1s ease-in-out infinite;
        }

        #vn-flyout-preview[data-state="transcribing"] .vn-flyout-frame {
            width: 98px;
        }

        #vn-flyout-preview[data-state="transcribing"] .vn-flyout-pill {
            background: #282b30;
            border-color: #474e57;
            padding-left: 6px;
            padding-right: 5px;
        }

        #vn-flyout-preview[data-state="transcribing"] .vn-fly-btn-close,
        #vn-flyout-preview[data-state="transcribing"] .vn-fly-timer,
        #vn-flyout-preview[data-state="transcribing"] .vn-fly-btn-finish {
            display: none;
        }

        #vn-flyout-preview[data-state="transcribing"] .vn-fly-spinner {
            display: block;
        }

        #vn-flyout-preview[data-state="transcribing"] .vn-fly-wave-bar {
            background: rgba(219, 228, 239, 0.95);
            animation: none;
            height: 2px;
        }

        #vn-app-preview.is-settings-open .vn-settings-sidebar {
            transform: translateX(0);
        }

        #vn-app-preview.is-settings-open .vn-settings-overlay {
            opacity: 1;
            pointer-events: auto;
        }

        @keyframes vn-mic-ring {
            0% {
                opacity: 0.5;
                transform: scale(0.82);
            }

            70% {
                opacity: 0.08;
                transform: scale(1.2);
            }

            100% {
                opacity: 0;
                transform: scale(1.25);
            }
        }

        @keyframes vn-processing-pulse {
            0% {
                opacity: 0.55;
            }

            50% {
                opacity: 1;
            }

            100% {
                opacity: 0.55;
            }
        }

        @media (max-width: 720px) {
            .vn-preview-stage {
                width: min(100%, 336px);
            }

            .vn-app-window {
                width: min(100%, 308px);
            }
        }

        .vn-showcase-stack {
            max-width: 980px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 0;
        }

        /* ── Scrollytelling layout ── */
        .vn-scrolly-section {
            --vn-scrolly-top: clamp(74px, 8vh, 104px);
            --vn-scrolly-step-height: clamp(240px, 44vh, 420px);
            --vn-scrolly-step-count: 3;
            --vn-scrolly-duration-multiplier: 5;
            --vn-scrolly-slot-height: calc(100vh - var(--vn-scrolly-top) - 24px);
            position: relative;
            width: 100%;
            max-width: 1100px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: minmax(0, 1.05fr) minmax(0, 1fr);
            align-items: start;
            column-gap: clamp(32px, 5vw, 64px);
            row-gap: 0;
            padding-top: clamp(10px, 2.5vh, 22px);
            padding-bottom: clamp(14px, 3.5vh, 30px);
            min-height: calc((var(--vn-scrolly-step-height) * var(--vn-scrolly-step-count) * var(--vn-scrolly-duration-multiplier)) + var(--vn-scrolly-top) + 24px);
        }

        /* App section: sticky app preview on the left, text on the right */
        .vn-scrolly-section--app .vn-scrolly-sticky {
            grid-column: 1;
            grid-row: 1;
            justify-self: end;
        }

        .vn-scrolly-section--app .vn-scrolly-steps {
            grid-column: 2;
            grid-row: 1;
            justify-self: start;
        }

        /* Flyout swaps columns so the flyout UI sits on the right on wide screens */
        .vn-scrolly-section--flyout {
            --vn-scrolly-step-height: clamp(360px, 62vh, 860px);
            --vn-scrolly-duration-multiplier: 1.25;
            grid-template-columns: minmax(0, 1fr) minmax(0, 1.05fr);
            padding-top: clamp(6px, 1.5vh, 16px);
        }

        .vn-scrolly-section--app {
            --vn-scrolly-step-height: clamp(360px, 62vh, 860px);
            --vn-scrolly-duration-multiplier: 1.25;
            padding-bottom: clamp(8px, 2vh, 20px);
        }

        .vn-scrolly-section--flyout .vn-scrolly-sticky {
            grid-column: 2;
            grid-row: 1;
            justify-self: start;
        }

        /* Mirror app section: same sticky/slot behavior so flyout text “flies” with the flyout */
        .vn-scrolly-section--flyout .vn-scrolly-steps {
            grid-column: 1;
            grid-row: 1;
            justify-self: end;
            position: sticky;
            top: var(--vn-scrolly-top);
            height: var(--vn-scrolly-slot-height);
            align-self: start;
            width: min(100%, 420px);
            display: flex;
            flex-direction: column;
            gap: 0;
            min-height: 0;
            z-index: 2;
        }

        /* App / flyout previews: stick within the hero area while text scrolls */
        .vn-scrolly-sticky {
            position: sticky;
            top: var(--vn-scrolly-top);
            align-self: start;
            height: var(--vn-scrolly-slot-height);
            min-height: 0;
            display: flex;
            align-items: center;
        }

        /* Container around preview shell */
        .vn-scrolly-content {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 24px;
        }

        .vn-scrolly-divider {
            --vn-divider-visible: 0;
            --vn-divider-fill-pct: 0%;
            --vn-divider-icon-top: 15%;
            --vn-divider-track-top: 15%;
            --vn-divider-track-height: 70%;
            position: sticky;
            grid-column: 1 / -1;
            grid-row: 1;
            justify-self: center;
            align-self: start;
            top: var(--vn-scrolly-top);
            height: var(--vn-scrolly-slot-height);
            width: 1px;
            background: transparent;
            pointer-events: none;
            z-index: 3;
            opacity: var(--vn-divider-visible);
            transition: opacity 0.16s linear;
        }

        .vn-scrolly-divider::before {
            content: '';
            position: absolute;
            left: -1px;
            top: var(--vn-divider-track-top);
            width: 2px;
            height: var(--vn-divider-track-height);
            background: rgba(255, 255, 255, 0.2);
        }

        .vn-scrolly-divider::after {
            content: '';
            position: absolute;
            left: -1px;
            top: var(--vn-divider-track-top);
            width: 2px;
            height: var(--vn-divider-fill-pct);
            background: rgba(255, 255, 255, 0.84);
        }

        .vn-scrolly-divider-icon {
            position: absolute;
            top: var(--vn-divider-icon-top);
            left: 0;
            width: 1px;
            display: flex;
            justify-content: center;
            font-size: 22px;
            line-height: 1;
            font-variation-settings: 'FILL' 0, 'wght' 700, 'GRAD' 0, 'opsz' 24;
            color: rgba(255, 255, 255, 1);
            transform: translateY(-50%);
        }

        .vn-scrolly-divider-stage-mark {
            position: absolute;
            top: var(--vn-divider-mark-top);
            left: 50%;
            width: 4px;
            height: 4px;
            border-radius: 999px;
            background: rgba(255, 255, 255, 0.32);
            transform: translate(-50%, -50%);
            transition: background-color 0.2s ease, transform 0.2s ease;
        }

        .vn-scrolly-divider-stage-mark.is-passed {
            background: rgba(255, 255, 255, 0.58);
        }

        .vn-scrolly-divider-stage-mark.is-next {
            background: rgba(255, 255, 255, 0.94);
            transform: translate(-50%, -50%) scale(1.16);
        }

        /* Text column with individual scroll steps */
        .vn-scrolly-steps {
            width: min(100%, 420px);
            position: sticky;
            top: var(--vn-scrolly-top);
            height: var(--vn-scrolly-slot-height);
            align-self: start;
            display: flex;
            flex-direction: column;
            gap: 0;
            z-index: 1;
        }

        /* Flyout: ensure text column stacks above preview and grid so it “flies” like the app text */
        .vn-scrolly-section--flyout .vn-scrolly-sticky {
            z-index: 1;
        }

        .vn-scrolly-step {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: stretch;
            min-height: 0;
        }

        .vn-scrolly-step .vn-context-panel {
            position: relative;
            height: 100%;
            width: min(100%, 380px);
            margin-inline: auto;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: flex-start;
        }

        .vn-scrolly-section--flyout .vn-scrolly-step .vn-context-panel {
            align-items: flex-end;
        }

        .vn-scrolly-step .vn-context-item {
            display: flex;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.6s cubic-bezier(0.22, 1, 0.36, 1);
        }

        .vn-scrolly-step .vn-context-item.is-active {
            opacity: 1;
            pointer-events: auto;
        }

        .vn-showcase-visual {
            width: 100%;
            display: flex;
            justify-content: center;
        }

        .vn-showcase-visual--app {
            width: min(100%, 360px);
        }

        .vn-showcase-visual--flyout {
            width: min(100%, 360px);
            align-items: center;
            min-height: 180px;
        }

        /* ── Flyout idle state: hide only the pill (no flyout until hotkey); keep background + taskbar icons ── */
        #vn-flyout-preview[data-state="idle"] .vn-flyout-frame {
            opacity: 0;
            transform: translateY(8px) scale(0.96);
            pointer-events: none;
        }

        .vn-flyout-showcase {
            --vn-taskbar-height: 48px;
            width: min(100%, 320px);
            min-height: 150px;
            border-radius: 16px;
            border: 1px solid rgba(100, 116, 139, 0.22);
            background-image:
                url('flyout-showcase-bg.png'),
                linear-gradient(#0f172a, #0f172a);
            background-size:
                100% calc(100% - var(--vn-taskbar-height)),
                100% 100%;
            background-position:
                top center,
                center;
            background-repeat: no-repeat;
            background-color: #0f172a;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 12px;
        }

        .dark .vn-flyout-showcase {
            border-color: rgba(148, 163, 184, 0.18);
            background-color: #0f172a;
        }


        .vn-taskbar-mockup {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: var(--vn-taskbar-height);
            background: rgba(32, 32, 32, 0.85);
            backdrop-filter: blur(24px);
            -webkit-backdrop-filter: blur(24px);
            border-top: 1px solid rgba(255, 255, 255, 0.08);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            z-index: 10;
        }

        .vn-taskbar-item {
            width: 40px;
            height: 40px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: default;
        }

        .vn-taskbar-icon {
            font-size: 24px;
            color: #e0e0e0;
        }

        .vn-taskbar-icon.start-icon {
            color: #00a4ef;
            /* Windows Blue */
        }


        .vn-context-panel {
            width: min(100%, 380px);
            min-height: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 0;
            margin: 0;
        }

        .vn-context-content-wrapper {
            position: relative;
            width: 100%;
        }

        .vn-context-item {
            display: flex;
            flex-direction: column;
            gap: 20px;
            opacity: 0.22;
            pointer-events: none;
            transition: opacity 0.5s cubic-bezier(0.22, 1, 0.36, 1);
        }

        .vn-context-item.is-active {
            opacity: 1;
            pointer-events: auto;
        }

        .vn-context-title {
            font-size: 42px;
            font-weight: 800;
            line-height: 1.15;
            letter-spacing: -0.02em;
            background: linear-gradient(to bottom, #1f2937, #4b5563);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0;
            position: relative;
        }

        .vn-context-title::after {
            content: '';
            display: block;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, rgba(239, 68, 68, 0) 0%, rgba(239, 68, 68, 1) 50%, rgba(239, 68, 68, 0) 100%);
            margin-top: 10px;
            border-radius: 2px;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .vn-scrolly-step .vn-context-item.is-active .vn-context-title::after {
            opacity: 1;
        }

        .dark .vn-context-title::after {
            background: linear-gradient(90deg, rgba(239, 68, 68, 0) 0%, rgba(239, 68, 68, 1) 50%, rgba(239, 68, 68, 0) 100%);
        }

        /* Flyout section: right-align text to connect visually with flyout on the right */
        .vn-scrolly-section--flyout .vn-context-panel {
            text-align: right;
            align-items: flex-end;
        }

        .vn-scrolly-section--flyout .vn-context-title,
        .vn-scrolly-section--flyout .vn-context-text {
            text-align: right;
        }

        .vn-scrolly-section--flyout .vn-context-tag {
            margin-left: auto;
            margin-right: 0;
        }

        .dark .vn-context-title {
            background: linear-gradient(to bottom, #ffffff, #9ca3af);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .vn-context-text {
            font-size: 16px;
            line-height: 1.6;
            color: #4b5563;
            max-height: 0;
            opacity: 0;
            overflow: hidden;
            transition: opacity 0.5s ease 0.15s, max-height 0.5s ease;
        }

        .vn-scrolly-step .vn-context-item.is-active .vn-context-text {
            max-height: 100px;
            opacity: 1;
        }

        .dark .vn-context-text {
            color: #9ca3af;
        }

        .vn-context-tag {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 10px;
            border-radius: 6px;
            background: #e2e8f0;
            color: #475569;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            width: fit-content;
        }

        .dark .vn-context-tag {
            background: #2d2d2d;
            color: #94a3b8;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        @media (max-width: 768px) {
            .vn-scrolly-section {
                --vn-scrolly-top: clamp(68px, 10svh, 88px);
                --vn-mobile-slot-height: clamp(176px, 30svh, 224px);
                --vn-mobile-text-height: clamp(170px, 24svh, 220px);
                --vn-mobile-phase-height: clamp(210px, 33svh, 290px);
                --vn-mobile-gap: clamp(8px, 1.6svh, 14px);
                display: block;
                width: 100%;
                max-width: 420px;
                min-height: calc((var(--vn-mobile-phase-height) * var(--vn-scrolly-step-count)) + var(--vn-scrolly-top) + var(--vn-mobile-slot-height) + var(--vn-mobile-gap) + var(--vn-mobile-text-height) + 32px);
                padding-top: 40px;
                padding-bottom: 40px;
            }

            .vn-scrolly-section--app {
                --vn-mobile-slot-height: 526px;
                --vn-mobile-text-height: clamp(236px, 35svh, 300px);
                --vn-mobile-phase-height: clamp(250px, 39svh, 330px);
            }

            .vn-scrolly-sticky {
                width: 100%;
                position: sticky;
                top: var(--vn-scrolly-top);
                height: auto;
                min-height: calc(var(--vn-mobile-slot-height) + var(--vn-mobile-gap) + var(--vn-mobile-text-height));
                transform: none;
                margin-bottom: var(--vn-mobile-gap);
                z-index: 4;
                align-items: flex-start;
                justify-content: center;
            }

            .vn-scrolly-steps {
                width: min(100%, 380px);
                margin-inline: auto;
                margin-top: calc(-1 * var(--vn-mobile-text-height));
                position: sticky;
                top: calc(var(--vn-scrolly-top) + var(--vn-mobile-slot-height) + var(--vn-mobile-gap));
                height: var(--vn-mobile-text-height);
                transform: none;
                z-index: 2;
            }

            .vn-scrolly-step {
                position: absolute;
                inset: 0;
                transform: none;
                margin: 0;
                min-height: 0;
                display: flex;
                align-items: stretch;
            }

            .vn-scrolly-step .vn-context-panel {
                position: relative;
                inset: auto;
                width: min(100%, 380px);
                margin-inline: auto;
                height: 100%;
                min-height: 0;
                pointer-events: auto;
                justify-content: center;
                align-items: center;
            }

            .vn-scrolly-step .vn-context-item:not(.is-active) .vn-context-text {
                opacity: 0;
                max-height: 0;
            }

            .vn-context-panel {
                text-align: center;
            }

            .vn-scrolly-section--flyout .vn-context-panel,
            .vn-scrolly-section--flyout .vn-context-title,
            .vn-scrolly-section--flyout .vn-context-text {
                text-align: center;
                align-items: center;
            }

            .vn-scrolly-section--app .vn-scrolly-sticky,
            .vn-scrolly-section--flyout .vn-scrolly-sticky {
                grid-column: auto;
                grid-row: auto;
                justify-self: center;
                z-index: 4;
            }

            .vn-scrolly-section--app .vn-scrolly-steps,
            .vn-scrolly-section--flyout .vn-scrolly-steps {
                grid-column: auto;
                grid-row: auto;
                justify-self: center;
                width: min(100%, 380px);
                position: sticky;
                top: calc(var(--vn-scrolly-top) + var(--vn-mobile-slot-height) + var(--vn-mobile-gap));
                height: var(--vn-mobile-text-height);
            }

            .vn-scrolly-section--flyout .vn-scrolly-step .vn-context-panel {
                justify-content: flex-start;
                align-items: center;
                padding-top: clamp(2px, 0.8svh, 8px);
            }

            .vn-scrolly-section--app .vn-scrolly-step .vn-context-panel {
                justify-content: flex-start;
                padding-top: clamp(4px, 1.1svh, 10px);
            }

            .vn-context-tag {
                margin-inline: auto;
            }

            .vn-context-title::after {
                max-width: 280px;
                margin-left: auto;
                margin-right: auto;
            }

            .vn-app-window {
                width: min(100%, 292px);
                height: 510px;
            }

            .vn-scrolly-divider {
                display: none;
            }
        }

        @media (max-width: 640px) {
            .vn-showcase-stack {
                gap: 44px;
            }

            .vn-context-title {
                font-size: clamp(34px, 10vw, 40px);
            }

            .vn-app-window {
                width: min(100%, 268px);
                height: 468px;
            }

            .vn-scrolly-section {
                --vn-mobile-gap: clamp(6px, 1.3svh, 10px);
            }

            .vn-scrolly-section--app {
                --vn-mobile-slot-height: 486px;
                --vn-mobile-text-height: clamp(220px, 36svh, 276px);
                --vn-mobile-phase-height: clamp(232px, 38svh, 300px);
            }

            .vn-scrolly-section--flyout {
                --vn-mobile-slot-height: clamp(164px, 29svh, 206px);
                --vn-mobile-text-height: clamp(162px, 27svh, 208px);
                --vn-mobile-phase-height: clamp(196px, 32svh, 270px);
            }
        }

        @keyframes hero-grid-drift {
            0% {
                transform: translate3d(0, 0, 0);
            }

            50% {
                transform: translate3d(-16px, -10px, 0);
            }

            100% {
                transform: translate3d(0, 0, 0);
            }
        }

        @keyframes hero-orb-float {
            0% {
                transform: translate3d(-50%, 0, 0) scale(1);
                opacity: 0.06;
            }

            50% {
                transform: translate3d(-50%, -18px, 0) scale(1.06);
                opacity: 0.12;
            }

            100% {
                transform: translate3d(-50%, 0, 0) scale(1);
                opacity: 0.06;
            }
        }

        @media (prefers-reduced-motion: reduce) {

            .hero-grid-pattern,
            .hero-ambient-orb {
                animation: none !important;
            }

            [data-reveal] {
                opacity: 1 !important;
                transform: none !important;
                filter: none !important;
                transition: none !important;
            }
        }
    </style>
    <noscript>
        <style>
            [data-reveal] {
                opacity: 1 !important;
                transform: none !important;
                filter: none !important;
            }
        </style>
    </noscript>
</head>

<body
    class="bg-background-light dark:bg-background-dark text-gray-900 dark:text-gray-100 transition-colors duration-300">
    <nav class="fixed top-0 w-full z-50 border-b border-border-light dark:border-border-dark glass-panel">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <div class="flex items-center gap-2">
                    <img alt="VoiceNote logo"
                        class="w-8 h-8 rounded-lg border border-gray-600 shadow-glow-sm object-cover"
                        src="VoiceNote.ico" />
                    <span class="font-bold text-xl tracking-tight">VoiceNote</span>
                </div>
                <div class="hidden md:flex space-x-8 items-center">
                    <a class="text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-primary transition-colors text-sm font-medium"
                        href="#preview">Live Preview</a>
                    <a class="text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-primary transition-colors text-sm font-medium"
                        href="#features">Features</a>
                    <a class="text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-primary transition-colors text-sm font-medium"
                        href="#workflow">Workflow</a>
                    <a class="text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-primary transition-colors text-sm font-medium"
                        href="#faq">FAQ</a>
                </div>
                <div class="md:hidden flex items-center">
                    <button id="mobile-nav-toggle" type="button" aria-expanded="false" aria-controls="mobile-nav-panel"
                        class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 focus:outline-none">
                        <span class="material-symbols-outlined" data-mobile-nav-icon>menu</span>
                    </button>
                </div>
            </div>
            <div class="md:hidden hidden py-3 border-t border-border-light dark:border-border-dark" id="mobile-nav-panel">
                <div class="flex flex-col gap-1">
                    <a class="px-2 py-2 rounded-md text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-primary hover:bg-gray-100/60 dark:hover:bg-gray-800/60 transition-colors text-sm font-medium"
                        data-mobile-nav-link href="#preview">Live Preview</a>
                    <a class="px-2 py-2 rounded-md text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-primary hover:bg-gray-100/60 dark:hover:bg-gray-800/60 transition-colors text-sm font-medium"
                        data-mobile-nav-link href="#features">Features</a>
                    <a class="px-2 py-2 rounded-md text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-primary hover:bg-gray-100/60 dark:hover:bg-gray-800/60 transition-colors text-sm font-medium"
                        data-mobile-nav-link href="#workflow">Workflow</a>
                    <a class="px-2 py-2 rounded-md text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-primary hover:bg-gray-100/60 dark:hover:bg-gray-800/60 transition-colors text-sm font-medium"
                        data-mobile-nav-link href="#faq">FAQ</a>
                </div>
            </div>
        </div>
    </nav>
    <section class="pt-32 pb-28 md:pb-32 relative">
        <div class="hero-grid-pattern"></div>
        <div
            class="hero-ambient-orb absolute top-0 left-1/2 -translate-x-1/2 w-[800px] h-[500px] bg-primary opacity-5 dark:opacity-10 blur-[120px] rounded-full -z-10 pointer-events-none">
        </div>
        <div class="hero-grid-fade"></div>
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10">
            <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-emerald-500/10 border border-emerald-500/30 text-emerald-500 dark:text-emerald-400 text-xs font-semibold uppercase tracking-wider mb-6"
                data-reveal="up" style="--reveal-order: 0;">
                <span class="w-2 h-2 rounded-full bg-emerald-500 dark:bg-emerald-400 animate-pulse"></span>
                Just Released
            </div>
            <h1 class="text-5xl md:text-7xl font-bold tracking-tight leading-[1.16] md:leading-[1.12] pb-[0.12em] mb-8 md:mb-10 bg-clip-text text-transparent bg-gradient-to-b from-gray-900 to-gray-600 dark:from-white dark:to-gray-400"
                data-reveal="up" style="--reveal-order: 1;">
                Take Notes and Draft Emails<br />by <span class="text-primary relative inline-block">
                    Speaking
                    <svg class="absolute -bottom-2 w-full h-3 text-primary opacity-40" preserveAspectRatio="none"
                        viewBox="0 0 100 10">
                        <path d="M0 5 Q 50 10 100 5" fill="none" stroke="currentColor" stroke-width="4"></path>
                    </svg>
                </span>
            </h1>
            <p class="text-xl text-gray-600 dark:text-gray-400 max-w-2xl mx-auto mb-12 md:mb-14 leading-relaxed" data-reveal="up"
                style="--reveal-order: 2;">
                Capture notes, emails, and ideas in seconds. VoiceNote turns speech into ready-to-use text anywhere in
                Windows 11.
            </p>
            <div class="flex flex-col gap-5 justify-center items-center mb-12 md:mb-16" data-reveal="up"
                style="--reveal-order: 3;">
                <a class="bg-primary hover:bg-primary-hover text-white px-8 h-14 rounded-xl font-semibold transition-all shadow-glow hover:shadow-lg flex items-center justify-center gap-2 group"
                    href="https://github.com/schummelbaum/VoiceNote-builds/releases/latest" id="download-windows-btn"
                    rel="noopener noreferrer">
                    <svg aria-hidden="true" class="w-5 h-5" fill="currentColor" height="1em" stroke="currentColor"
                        stroke-width="0" viewBox="0 0 448 512" width="1em" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M0 93.7l183.6-25.3v177.4H0V93.7zm0 324.6l183.6 25.3V268.4H0v149.9zm203.8 28L448 480V268.4H203.8v177.9zm0-380.6L448 32v214.9H203.8V65.7z">
                        </path>
                    </svg>
                    Download for Windows
                </a>
                <div class="flex flex-col items-center gap-3">
                    <p class="text-sm text-gray-500 dark:text-gray-400 font-medium">Also available for</p>
                    <div class="flex flex-row gap-3">
                        <button aria-disabled="true"
                            class="border border-dashed border-gray-400 bg-transparent hover:bg-gray-50/10 text-gray-400 px-8 h-[52px] rounded-xl font-semibold transition-all flex items-center justify-center gap-2 opacity-60 hover:opacity-100 pointer-events-none"
                            tabindex="-1" type="button">
                            <i class="fa-brands fa-apple text-lg"></i>
                            macOS — Soon
                        </button>
                        <button aria-disabled="true"
                            class="border border-dashed border-gray-400 bg-transparent hover:bg-gray-50/10 text-gray-400 px-8 h-[52px] rounded-xl font-semibold transition-all flex items-center justify-center gap-2 opacity-60 hover:opacity-100 pointer-events-none"
                            tabindex="-1" type="button">
                            <i class="fa-brands fa-linux text-lg"></i>
                            Linux — Soon
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="py-24 relative scroll-mt-32 bg-background-light dark:bg-background-dark" id="preview">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16" data-reveal="up" data-reveal-early="true" style="--reveal-order: 0;">
                <h2 class="text-3xl md:text-4xl font-bold mb-4 text-gray-900 dark:text-white">Live Preview</h2>
                <p class="text-gray-600 dark:text-gray-400 max-w-xl mx-auto">Watch the app and flyout respond as if you were using VoiceNote in real time.</p>
            </div>
            <div class="vn-preview-shell max-w-7xl mx-auto" data-reveal="zoom" data-reveal-early="true"
                style="--reveal-order: 1;">
                <div class="vn-showcase-stack">

                    <!-- ═══ App Scrollytelling Section ═══ -->
                    <div class="vn-scrolly-section vn-scrolly-section--app" data-scrolly-section="app" data-scrolly-tail="0">
                        <!-- Sticky app preview (left) -->
                        <div class="vn-scrolly-sticky" data-scrolly-sticky="app">
                            <div class="vn-scrolly-content">
                                <div class="vn-showcase-visual vn-showcase-visual--app">
                                    <div class="vn-preview-stage vn-preview-stage--app" data-state="idle" id="vn-app-preview">
                                        <div class="vn-app-window">
                                            <div class="vn-app-shell">
                                                <section class="vn-main-panel">
                                                    <span class="vn-gear-button" aria-hidden="true">
                                                        <span class="material-symbols-outlined">settings</span>
                                                    </span>
                                                    <header class="vn-mic-header">
                                                        <span class="vn-mic-button" aria-hidden="true">
                                                            <span
                                                                class="material-symbols-outlined vn-mic-icon vn-mic-idle">mic</span>
                                                            <span
                                                                class="material-symbols-outlined vn-mic-icon vn-mic-listening">stop</span>
                                                            <span aria-hidden="true" class="vn-mic-spinner">
                                                                <span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span>
                                                            </span>
                                                        </span>
                                                        <p class="vn-recording-label" id="vn-preview-recording-label">Tap to
                                                            record</p>
                                                    </header>
                                                    <section class="vn-history-section">
                                                        <div class="vn-history-header">
                                                            <span class="material-symbols-outlined">history</span>
                                                            <span>History</span>
                                                        </div>
                                                        <div class="vn-history-list" id="vn-history-list">
                                                            <article class="vn-history-card is-recent">
                                                                <div class="vn-history-card-top">
                                                                    <span class="vn-history-time">Just now</span>
                                                                    <span class="vn-history-actions">
                                                                        <span aria-label="Edit entry"
                                                                            class="vn-history-action vn-history-action--edit"
                                                                            title="Edit entry">
                                                                            <span class="material-symbols-outlined">edit</span>
                                                                        </span>
                                                                        <span aria-label="Delete entry"
                                                                            class="vn-history-action vn-history-action--delete"
                                                                            title="Delete entry">
                                                                            <span
                                                                                class="material-symbols-outlined">delete</span>
                                                                        </span>
                                                                        <span aria-label="Copy entry"
                                                                            class="vn-history-action vn-history-action--copy"
                                                                            title="Copy entry">
                                                                            <span
                                                                                class="material-symbols-outlined">content_copy</span>
                                                                        </span>
                                                                    </span>
                                                                </div>
                                                                <p class="vn-history-text">Hey Josh, thanks for your email
                                                                    today. I
                                                                    reviewed the proposal and will send feedback tomorrow.</p>
                                                            </article>
                                                            <article class="vn-history-card">
                                                                <div class="vn-history-card-top">
                                                                    <span class="vn-history-time">2 mins ago</span>
                                                                    <span class="vn-history-actions">
                                                                        <span aria-label="Edit entry"
                                                                            class="vn-history-action vn-history-action--edit"
                                                                            title="Edit entry">
                                                                            <span class="material-symbols-outlined">edit</span>
                                                                        </span>
                                                                        <span aria-label="Delete entry"
                                                                            class="vn-history-action vn-history-action--delete"
                                                                            title="Delete entry">
                                                                            <span
                                                                                class="material-symbols-outlined">delete</span>
                                                                        </span>
                                                                        <span aria-label="Copy entry"
                                                                            class="vn-history-action vn-history-action--copy"
                                                                            title="Copy entry">
                                                                            <span
                                                                                class="material-symbols-outlined">content_copy</span>
                                                                        </span>
                                                                    </span>
                                                                </div>
                                                                <p class="vn-history-text">Meeting notes: launch is on track,
                                                                    design
                                                                    review moved to Thursday, and Sarah will share final assets.
                                                                </p>
                                                            </article>
                                                            <article class="vn-history-card">
                                                                <div class="vn-history-card-top">
                                                                    <span class="vn-history-time">5 mins ago</span>
                                                                    <span class="vn-history-actions">
                                                                        <span aria-label="Edit entry"
                                                                            class="vn-history-action vn-history-action--edit"
                                                                            title="Edit entry">
                                                                            <span class="material-symbols-outlined">edit</span>
                                                                        </span>
                                                                        <span aria-label="Delete entry"
                                                                            class="vn-history-action vn-history-action--delete"
                                                                            title="Delete entry">
                                                                            <span
                                                                                class="material-symbols-outlined">delete</span>
                                                                        </span>
                                                                        <span aria-label="Copy entry"
                                                                            class="vn-history-action vn-history-action--copy"
                                                                            title="Copy entry">
                                                                            <span
                                                                                class="material-symbols-outlined">content_copy</span>
                                                                        </span>
                                                                    </span>
                                                                </div>
                                                                <p class="vn-history-text">Hi team, quick update: QA passed,
                                                                    release is
                                                                    scheduled for Friday, and docs are almost finished.</p>
                                                            </article>
                                                        </div>
                                                    </section>
                                                </section>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="vn-scrolly-divider" aria-hidden="true">
                            <span class="material-symbols-outlined vn-scrolly-divider-icon">expand_more</span>
                        </div>

                        <!-- Scrollable steps (right) -->
                        <div class="vn-scrolly-steps">
                            <!-- App: Idle -->
                            <div class="vn-scrolly-step" data-scrolly-target="app" data-scrolly-state="idle" data-scrolly-weight="5">
                                <aside class="vn-context-panel">
                                    <div class="vn-context-item is-active" data-target="app" data-state="idle">
                                        <h3 class="vn-context-title">Your Voice, Your Notes</h3>
                                        <p class="vn-context-text">Ready to capture a thought? Tap the microphone and start dictating notes, emails, and messages instantly.</p>
                                    </div>
                                </aside>
                            </div>

                            <!-- App: Listening -->
                            <div class="vn-scrolly-step" data-scrolly-target="app" data-scrolly-state="listening" data-scrolly-weight="5">
                                <aside class="vn-context-panel">
                                    <div class="vn-context-item" data-target="app" data-state="listening">
                                        <h3 class="vn-context-title text-primary">Go Ahead, Speak Naturally</h3>
                                        <p class="vn-context-text">VoiceNote captures your words in real time so you can draft complete notes or emails without typing.</p>
                                    </div>
                                </aside>
                            </div>

                            <!-- App: Transcribing -->
                            <div class="vn-scrolly-step" data-scrolly-target="app" data-scrolly-state="transcribing" data-scrolly-weight="5">
                                <aside class="vn-context-panel">
                                    <div class="vn-context-item" data-target="app" data-state="transcribing">
                                        <h3 class="vn-context-title">Turning Speech into Text</h3>
                                        <p class="vn-context-text">Our local AI models transcribe your recording quickly and accurately, ready to paste.</p>
                                    </div>
                                </aside>
                            </div>
                        </div>
                    </div>

                    <!-- ═══ Flyout Scrollytelling Section ═══ -->
                    <div class="vn-scrolly-section vn-scrolly-section--flyout" data-scrolly-section="flyout" data-scrolly-tail="0">
                        <!-- Sticky flyout preview (right) -->
                        <div class="vn-scrolly-sticky vn-showcase-visual vn-showcase-visual--flyout">
                            <div class="vn-scrolly-content">
                                <div class="vn-flyout-showcase" data-state="idle" id="vn-flyout-preview">
                                <div class="vn-flyout-frame">
                                    <div class="vn-flyout-pill">
                                        <span class="vn-fly-btn vn-fly-btn-close" aria-hidden="true">
                                            <span class="material-symbols-outlined">close</span>
                                        </span>
                                        <div class="vn-fly-wave">
                                            <span class="vn-fly-wave-bar"></span><span
                                                class="vn-fly-wave-bar"></span><span
                                                class="vn-fly-wave-bar"></span><span
                                                class="vn-fly-wave-bar"></span><span
                                                class="vn-fly-wave-bar"></span><span
                                                class="vn-fly-wave-bar"></span><span
                                                class="vn-fly-wave-bar"></span><span
                                                class="vn-fly-wave-bar"></span><span
                                                class="vn-fly-wave-bar"></span><span
                                                class="vn-fly-wave-bar"></span><span
                                                class="vn-fly-wave-bar"></span><span class="vn-fly-wave-bar"></span>
                                        </div>
                                        <div class="vn-fly-timer" id="vn-preview-flyout-timer">0:00</div>
                                        <div aria-hidden="true" class="vn-fly-spinner">
                                            <span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span>
                                        </div>
                                        <span class="vn-fly-btn vn-fly-btn-finish" aria-hidden="true">
                                            <span class="material-symbols-outlined">check</span>
                                        </span>
                                    </div>
                                </div>
                                <div class="vn-taskbar-mockup" aria-hidden="true">
                                    <div class="vn-taskbar-item">
                                        <span
                                            class="material-symbols-outlined vn-taskbar-icon start-icon">grid_view</span>
                                    </div>
                                    <div class="vn-taskbar-item">
                                        <span class="material-symbols-outlined vn-taskbar-icon">search</span>
                                    </div>
                                    <div class="vn-taskbar-item">
                                        <span class="material-symbols-outlined vn-taskbar-icon">mail</span>
                                    </div>
                                    <div class="vn-taskbar-item">
                                        <span class="material-symbols-outlined vn-taskbar-icon">folder</span>
                                    </div>
                                    <div class="vn-taskbar-item">
                                        <span class="material-symbols-outlined vn-taskbar-icon">public</span>
                                    </div>
                                </div>
                            </div>
                            </div>
                        </div>
                        <div class="vn-scrolly-divider" aria-hidden="true">
                            <span class="material-symbols-outlined vn-scrolly-divider-icon">expand_more</span>
                        </div>

                        <!-- Scrollable steps (left) -->
                        <div class="vn-scrolly-steps">
                            <!-- Flyout: Idle -->
                            <div class="vn-scrolly-step" data-scrolly-target="flyout" data-scrolly-state="idle" data-scrolly-weight="5">
                                <aside class="vn-context-panel">
                                    <div class="vn-context-item is-active" data-target="flyout" data-state="idle">
                                        <h3 class="vn-context-title">Quick Capture Anywhere</h3>
                                        <p class="vn-context-text">Press a global hotkey to summon VoiceNote's flyout over any window, ready for instant dictation.</p>
                                    </div>
                                </aside>
                            </div>

                            <!-- Flyout: Listening -->
                            <div class="vn-scrolly-step" data-scrolly-target="flyout" data-scrolly-state="listening" data-scrolly-weight="5">
                                <aside class="vn-context-panel">
                                    <div class="vn-context-item" data-target="flyout" data-state="listening">
                                        <h3 class="vn-context-title">Speak Your Mind</h3>
                                        <p class="vn-context-text">The flyout records your voice with a live waveform and timer, without breaking your focus.</p>
                                    </div>
                                </aside>
                            </div>

                            <!-- Flyout: Transcribing -->
                            <div class="vn-scrolly-step" data-scrolly-target="flyout" data-scrolly-state="transcribing" data-scrolly-weight="5">
                                <aside class="vn-context-panel">
                                    <div class="vn-context-item" data-target="flyout" data-state="transcribing">
                                        <h3 class="vn-context-title">Instant Insert</h3>
                                        <p class="vn-context-text">Your transcription appears exactly where your cursor is in the active app.</p>
                                    </div>
                                </aside>
                            </div>
                        </div>
                            </div>
                        </div>
                    </div>
                </div>
    </section>
    <section class="py-24 relative overflow-hidden" id="features">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16" data-reveal="up">
                <h2 class="text-3xl md:text-4xl font-bold mb-4 text-gray-900 dark:text-white">Designed for Fast Capture
                </h2>
                <p class="text-gray-600 dark:text-gray-400 max-w-xl mx-auto">Speak your thoughts once and get clean text
                    ready for notes, emails, and messages.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="group bg-white dark:bg-surface-dark p-8 rounded-2xl border border-border-light dark:border-border-dark hover:border-primary dark:hover:border-primary transition-colors shadow-sm hover:shadow-glow-sm relative overflow-hidden"
                    data-reveal="up" style="--reveal-order: 0;">
                    <div
                        class="absolute top-0 right-0 w-32 h-32 bg-primary opacity-5 rounded-bl-[100px] pointer-events-none transition-opacity group-hover:opacity-10">
                    </div>
                    <div
                        class="w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center mb-6 text-primary group-hover:scale-110 transition-transform duration-300">
                        <span class="material-symbols-outlined text-2xl">memory</span>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3">CUDA-Accelerated Transcription</h3>
                    <p class="text-gray-600 dark:text-gray-400 leading-relaxed">
                        VoiceNote uses NVIDIA CUDA drivers on supported GPUs to speed up Whisper transcription and cut
                        down processing time.
                    </p>
                </div>
                <div class="group bg-white dark:bg-surface-dark p-8 rounded-2xl border border-border-light dark:border-border-dark hover:border-primary dark:hover:border-primary transition-colors shadow-sm hover:shadow-glow-sm relative overflow-hidden"
                    data-reveal="up" style="--reveal-order: 1;">
                    <div
                        class="absolute top-0 right-0 w-32 h-32 bg-primary opacity-5 rounded-bl-[100px] pointer-events-none transition-opacity group-hover:opacity-10">
                    </div>
                    <div
                        class="w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center mb-6 text-primary group-hover:scale-110 transition-transform duration-300">
                        <span class="material-symbols-outlined text-2xl">shield_lock</span>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3">Local-Only Processing</h3>
                    <p class="text-gray-600 dark:text-gray-400 leading-relaxed">
                        Your recordings and transcripts stay on your machine. VoiceNote is built for private, local AI
                        transcription without sending audio to cloud services.
                    </p>
                </div>
                <div class="group bg-white dark:bg-surface-dark p-8 rounded-2xl border border-border-light dark:border-border-dark hover:border-primary dark:hover:border-primary transition-colors shadow-sm hover:shadow-glow-sm relative overflow-hidden"
                    data-reveal="up" style="--reveal-order: 2;">
                    <div
                        class="absolute top-0 right-0 w-32 h-32 bg-primary opacity-5 rounded-bl-[100px] pointer-events-none transition-opacity group-hover:opacity-10">
                    </div>
                    <div
                        class="w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center mb-6 text-primary group-hover:scale-110 transition-transform duration-300">
                        <span class="material-symbols-outlined text-2xl">tune</span>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3">Adaptive Model Selection</h3>
                    <p class="text-gray-600 dark:text-gray-400 leading-relaxed">
                        VoiceNote selects the best transcription setup for your hardware, balancing speed and accuracy
                        for smooth day-to-day dictation.
                    </p>
                </div>
            </div>
        </div>
    </section>
    <section class="py-24 bg-surface-light dark:bg-[#151515] relative overflow-hidden" id="workflow">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16" data-reveal="up">
                <h2 class="text-3xl md:text-5xl font-bold mb-4 text-gray-900 dark:text-white">Three steps. Start
                    writing faster.</h2>
                <p class="text-gray-600 dark:text-gray-400 text-lg">From idea to polished text in seconds.</p>
            </div>
            <div class="relative max-w-5xl mx-auto">
                <div class="hidden md:block absolute top-[28px] left-20 right-20 h-[1px] bg-border-dark opacity-40 z-0">
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-12 relative z-10">
                    <div class="flex flex-col items-center text-center" data-reveal="up" style="--reveal-order: 0;">
                        <div
                            class="w-14 h-14 rounded-2xl bg-surface-darker border border-primary/20 flex items-center justify-center mb-8 relative z-20 shadow-lg">
                            <span class="material-symbols-outlined text-xl text-primary">keyboard</span>
                        </div>
                        <span class="text-xs font-bold text-primary mb-2 uppercase tracking-widest">01</span>
                        <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3">Press Hotkey</h3>
                        <p class="text-sm text-gray-500 dark:text-gray-400 leading-relaxed px-4">A compact flyout
                            appears instantly at your cursor, so no app switching is needed.</p>
                    </div>
                    <div class="flex flex-col items-center text-center" data-reveal="up" style="--reveal-order: 1;">
                        <div
                            class="w-14 h-14 rounded-2xl bg-surface-darker border border-primary/20 flex items-center justify-center mb-8 relative z-20 shadow-lg">
                            <span class="material-symbols-outlined text-xl text-primary">mic</span>
                        </div>
                        <span class="text-xs font-bold text-primary mb-2 uppercase tracking-widest">02</span>
                        <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3">Speak naturally</h3>
                        <p class="text-sm text-gray-500 dark:text-gray-400 leading-relaxed px-4">See a live waveform
                            and recording timer while you speak naturally at your own pace.</p>
                    </div>
                    <div class="flex flex-col items-center text-center" data-reveal="up" style="--reveal-order: 2;">
                        <div
                            class="w-14 h-14 rounded-2xl bg-surface-darker border border-primary/20 flex items-center justify-center mb-8 relative z-20 shadow-lg">
                            <span class="material-symbols-outlined text-xl text-primary">check</span>
                        </div>
                        <span class="text-xs font-bold text-primary mb-2 uppercase tracking-widest">03</span>
                        <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3">Hit Apply</h3>
                        <p class="text-sm text-gray-500 dark:text-gray-400 leading-relaxed px-4">Your transcription is
                            inserted right where your cursor was, ready to send or edit.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="py-24 bg-surface-light dark:bg-[#151515]" id="faq">
        <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16" data-reveal="up">
                <h2 class="text-3xl md:text-4xl font-bold mb-4 text-gray-900 dark:text-white">Frequently Asked Questions
                </h2>
            </div>
            <div class="space-y-4">
                <details
                    class="group bg-white dark:bg-surface-dark p-6 rounded-xl border border-border-light dark:border-border-dark cursor-pointer open:border-primary/50 dark:open:border-primary/50 transition-colors"
                    data-reveal="up" style="--reveal-order: 0;" open>
                    <summary
                        class="flex justify-between items-center font-semibold text-lg list-none text-gray-900 dark:text-gray-100">
                        Is my voice data private?
                        <span
                            class="material-symbols-outlined transform group-open:rotate-180 transition-transform text-gray-400">expand_more</span>
                    </summary>
                    <p class="text-gray-600 dark:text-gray-400 mt-4 leading-relaxed">
                        Yes. You can choose to use local processing with Whisper models running entirely on your
                        machine. No audio ever leaves your computer.
                    </p>
                </details>
                <details
                    class="group bg-white dark:bg-surface-dark p-6 rounded-xl border border-border-light dark:border-border-dark cursor-pointer open:border-primary/50 dark:open:border-primary/50 transition-colors"
                    data-reveal="up" style="--reveal-order: 1;">
                    <summary
                        class="flex justify-between items-center font-semibold text-lg list-none text-gray-900 dark:text-gray-100">
                        What apps does VoiceNote work in?
                        <span
                            class="material-symbols-outlined transform group-open:rotate-180 transition-transform text-gray-400">expand_more</span>
                    </summary>
                    <p class="text-gray-600 dark:text-gray-400 mt-4 leading-relaxed">
                        VoiceNote works in most applications where you can type, including email clients, browsers, chat
                        apps, docs, and forms.
                    </p>
                </details>
                <details
                    class="group bg-white dark:bg-surface-dark p-6 rounded-xl border border-border-light dark:border-border-dark cursor-pointer open:border-primary/50 dark:open:border-primary/50 transition-colors"
                    data-reveal="up" style="--reveal-order: 2;">
                    <summary
                        class="flex justify-between items-center font-semibold text-lg list-none text-gray-900 dark:text-gray-100">
                        What languages are supported?
                        <span
                            class="material-symbols-outlined transform group-open:rotate-180 transition-transform text-gray-400">expand_more</span>
                    </summary>
                    <p class="text-gray-600 dark:text-gray-400 mt-4 leading-relaxed">
                        We support over 50 languages including English, Spanish, French, German, Chinese, and Japanese,
                        with auto-detection capabilities.
                    </p>
                </details>
                <details
                    class="group bg-white dark:bg-surface-dark p-6 rounded-xl border border-border-light dark:border-border-dark cursor-pointer open:border-primary/50 dark:open:border-primary/50 transition-colors"
                    data-reveal="up" style="--reveal-order: 3;">
                    <summary
                        class="flex justify-between items-center font-semibold text-lg list-none text-gray-900 dark:text-gray-100">
                        How does it perform on my hardware?
                        <span
                            class="material-symbols-outlined transform group-open:rotate-180 transition-transform text-gray-400">expand_more</span>
                    </summary>
                    <p class="text-gray-600 dark:text-gray-400 mt-4 leading-relaxed">
                        VoiceNote adaptively selects the best transcription model based on your hardware
                        configuration to
                        ensure optimal speed and accuracy without slowing down your system.
                    </p>
                </details>
            </div>
        </div>
    </section>
    <footer
        class="bg-background-light dark:bg-background-dark border-t border-border-light dark:border-border-dark py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 grid grid-cols-1 md:grid-cols-3 gap-6 items-center">
            <div class="flex items-center gap-2 justify-self-center md:justify-self-start">
                <img alt="VoiceNote logo" class="w-6 h-6 rounded object-cover" src="VoiceNote.ico" />
                <span class="font-bold text-gray-900 dark:text-white">VoiceNote</span>
            </div>
            <div class="flex w-full justify-center gap-8 text-sm text-gray-500 dark:text-gray-400 justify-self-center">
                <a class="hover:text-primary transition-colors" href="#">Privacy</a>
                <a class="hover:text-primary transition-colors" href="#">Terms</a>
            </div>
            <div class="text-xs text-gray-400 dark:text-gray-600 justify-self-center md:justify-self-end">
                © 2026 VoiceNote App. All rights reserved.
            </div>
        </div>
    </footer>
    <script>
        // Simple script to toggle dark mode for preview purposes if needed, 
        // though Tailwind's 'class' strategy relies on a parent class.
        // Assuming the environment this runs in allows toggling via system pref or a button not shown.
        // For this demo, we force dark mode on the html tag to match the prompt's main vibe, 
        // but the classes support both.
        document.documentElement.classList.add('dark');

        const featuresSection = document.getElementById('features');
        const workflowSection = document.getElementById('workflow');
        if (
            featuresSection &&
            workflowSection &&
            featuresSection.parentElement &&
            featuresSection.parentElement === workflowSection.parentElement
        ) {
            featuresSection.parentElement.insertBefore(workflowSection, featuresSection);
        }

        const mobileNavToggle = document.getElementById('mobile-nav-toggle');
        const mobileNavPanel = document.getElementById('mobile-nav-panel');
        const mobileNavIcon = mobileNavToggle?.querySelector('[data-mobile-nav-icon]');
        const mobileNavLinks = Array.from(document.querySelectorAll('[data-mobile-nav-link]'));

        if (mobileNavToggle && mobileNavPanel) {
            const closeMobileNav = () => {
                mobileNavPanel.classList.add('hidden');
                mobileNavToggle.setAttribute('aria-expanded', 'false');
                if (mobileNavIcon) {
                    mobileNavIcon.textContent = 'menu';
                }
            };

            const openMobileNav = () => {
                mobileNavPanel.classList.remove('hidden');
                mobileNavToggle.setAttribute('aria-expanded', 'true');
                if (mobileNavIcon) {
                    mobileNavIcon.textContent = 'close';
                }
            };

            mobileNavToggle.addEventListener('click', () => {
                const isOpen = mobileNavToggle.getAttribute('aria-expanded') === 'true';
                if (isOpen) {
                    closeMobileNav();
                    return;
                }
                openMobileNav();
            });

            for (const link of mobileNavLinks) {
                link.addEventListener('click', closeMobileNav);
            }

            window.addEventListener('resize', () => {
                if (window.innerWidth >= 768) {
                    closeMobileNav();
                }
            });

            window.addEventListener('keydown', (event) => {
                if (event.key === 'Escape') {
                    closeMobileNav();
                }
            });
        }

        const downloadBtn = document.getElementById('download-windows-btn');
        if (downloadBtn) {
            downloadBtn.addEventListener('click', async (event) => {
                event.preventDefault();
                const fallbackUrl = 'https://github.com/schummelbaum/VoiceNote-builds/releases/latest';
                try {
                    const response = await fetch('https://api.github.com/repos/schummelbaum/VoiceNote-builds/releases/latest', {
                        headers: { 'Accept': 'application/vnd.github+json' },
                    });
                    if (!response.ok) throw new Error('Could not load latest release.');
                    const release = await response.json();
                    const assets = Array.isArray(release.assets) ? release.assets : [];
                    const preferredAsset =
                        assets.find((asset) => /\.exe$/i.test(asset.name)) ||
                        assets.find((asset) => /\.msi$/i.test(asset.name)) ||
                        assets.find((asset) => !/\.sha256$/i.test(asset.name));
                    const targetUrl = preferredAsset?.browser_download_url || release.html_url || fallbackUrl;
                    window.location.href = targetUrl;
                } catch (error) {
                    window.location.href = fallbackUrl;
                }
            });
        }

        const revealElements = Array.from(document.querySelectorAll('[data-reveal]'));
        if (revealElements.length) {
            const reducedMotionQuery = window.matchMedia('(prefers-reduced-motion: reduce)');
            const showRevealElement = (element) => {
                element.classList.add('is-visible');
            };

            if (reducedMotionQuery.matches || !('IntersectionObserver' in window)) {
                for (const element of revealElements) {
                    showRevealElement(element);
                }
            } else {
                const handleRevealEntries = (entries, observer) => {
                    for (const entry of entries) {
                        if (!entry.isIntersecting) {
                            continue;
                        }
                        showRevealElement(entry.target);
                        observer.unobserve(entry.target);
                    }
                };

                const revealObserver = new IntersectionObserver(handleRevealEntries, {
                    threshold: 0.16,
                    rootMargin: '0px 0px -8% 0px',
                });
                const earlyRevealObserver = new IntersectionObserver(handleRevealEntries, {
                    threshold: 0.01,
                    rootMargin: '0px 0px 28% 0px',
                });

                const viewportHeight = window.innerHeight || document.documentElement.clientHeight || 0;
                for (const element of revealElements) {
                    const shouldRevealEarly = element.dataset.revealEarly === 'true';
                    const eagerFactor = shouldRevealEarly ? 1.2 : 0.9;
                    const rect = element.getBoundingClientRect();
                    if (rect.top <= viewportHeight * eagerFactor) {
                        showRevealElement(element);
                        continue;
                    }
                    if (shouldRevealEarly) {
                        earlyRevealObserver.observe(element);
                        continue;
                    }
                    revealObserver.observe(element);
                }
            }
        }

        // ── Shared helpers ──

        const activateShowcaseContext = (target, state) => {
            const items = Array.from(document.querySelectorAll(`.vn-context-item[data-target="${target}"]`));
            for (const item of items) {
                item.classList.toggle('is-active', item.dataset.state === state);
            }
        };

        const formatShowcaseTime = (seconds) => {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins}:${String(secs).padStart(2, '0')}`;
        };

        const clamp01 = (value) => Math.max(0, Math.min(1, Number(value) || 0));

        const createShowcaseWaveformController = (bars) => {
            const DOT_COUNT = 12;
            const DOT_BASE_HEIGHT = 2;
            const DOT_MAX_HEIGHT = 14;
            const center = (DOT_COUNT - 1) * 0.5;
            const barLevels = new Array(DOT_COUNT).fill(0);
            let mode = 'idle';
            let phase = 0;
            let energy = 0;
            let lastAtMs = performance.now();

            const setMode = (nextMode) => {
                mode = ['listening', 'transcribing'].includes(nextMode) ? nextMode : 'idle';
                if (mode === 'transcribing') {
                    phase = 0;
                    energy = 0;
                    for (let i = 0; i < DOT_COUNT; i += 1) {
                        barLevels[i] = 0;
                    }
                }
            };

            const render = () => {
                if (!bars.length) {
                    return;
                }
                const idleColor = mode === 'transcribing'
                    ? [219, 228, 239, 0.62]
                    : [174, 174, 174, 0.56];
                const activeColor = mode === 'transcribing'
                    ? [219, 228, 239, 0.98]
                    : [248, 86, 86, 0.95];

                for (let i = 0; i < Math.min(DOT_COUNT, bars.length); i += 1) {
                    if (mode === 'transcribing') {
                        bars[i].style.height = `${DOT_BASE_HEIGHT}px`;
                        bars[i].style.backgroundColor = 'rgba(219, 228, 239, 0.95)';
                        continue;
                    }
                    const level = clamp01(barLevels[i]);
                    const height = Math.round(DOT_BASE_HEIGHT + (level * (DOT_MAX_HEIGHT - DOT_BASE_HEIGHT)));
                    const activity = mode === 'idle'
                        ? 0
                        : clamp01((level * 0.82) + (energy * 0.35));
                    const r = Math.round(idleColor[0] + ((activeColor[0] - idleColor[0]) * activity));
                    const g = Math.round(idleColor[1] + ((activeColor[1] - idleColor[1]) * activity));
                    const b = Math.round(idleColor[2] + ((activeColor[2] - idleColor[2]) * activity));
                    const a = idleColor[3] + ((activeColor[3] - idleColor[3]) * activity);
                    bars[i].style.height = `${Math.max(DOT_BASE_HEIGHT, Math.min(DOT_MAX_HEIGHT, height))}px`;
                    bars[i].style.backgroundColor = `rgba(${r}, ${g}, ${b}, ${a.toFixed(3)})`;
                }
            };

            const frame = (nowMs) => {
                const dtScale = Math.max(0.45, Math.min(2.0, (nowMs - lastAtMs) / 16.666));
                lastAtMs = nowMs;
                const nowSec = nowMs / 1000;

                if (mode === 'transcribing') {
                    energy = 0;
                    render();
                    return;
                }

                if (mode === 'listening') {
                    const syllable = Math.max(0, Math.sin((nowSec * 10.8) + Math.sin(nowSec * 1.4)));
                    const phrase = 0.52 + (Math.sin((nowSec * 1.65) + 0.8) * 0.33);
                    const target = clamp01((0.16 + (syllable * 0.56) + (phrase * 0.34)) + ((Math.random() - 0.5) * 0.05));
                    energy += (target - energy) * (0.15 * dtScale);
                    phase += (0.13 + (energy * 0.14)) * dtScale;
                } else {
                    energy += (0 - energy) * (0.13 * dtScale);
                }

                for (let i = 0; i < DOT_COUNT; i += 1) {
                    if (mode === 'idle') {
                        barLevels[i] += (0 - barLevels[i]) * (0.22 * dtScale);
                        continue;
                    }
                    const centerWeight = 1.0 - Math.min(1.0, Math.abs(i - center) / (center + 0.6));
                    const waveA = Math.sin((i * 0.92) - phase);
                    const waveB = Math.sin((i * 1.57) - (phase * 0.61) + 1.35);
                    const travel = ((waveA * 0.68) + (waveB * 0.32) + 1.0) * 0.5;
                    const floor = 0.06 + (centerWeight * 0.10);
                    const targetLevel = clamp01(floor + (travel * energy * (0.56 + (centerWeight * 0.44))));
                    barLevels[i] += (targetLevel - barLevels[i]) * (0.24 * dtScale);
                }

                render();
            };

            render();
            return { setMode, frame };
        };

        const createShowcaseSpinnerController = (spinnerRoot) => {
            const spokes = Array.from(spinnerRoot.querySelectorAll('span'));
            const SPOKE_COUNT = 8;
            const PERIOD_MS = 900;
            const MIN_ALPHA = 0.26;
            const MAX_ALPHA = 0.98;
            const SPINNER_RGB = [219, 228, 239];
            let active = false;
            let startedAtMs = 0;

            const setSpoke = (spoke, alpha) => {
                const clamped = clamp01(alpha);
                const glow = clamp01((clamped - MIN_ALPHA) / (MAX_ALPHA - MIN_ALPHA));
                spoke.style.backgroundColor = `rgba(${SPINNER_RGB[0]}, ${SPINNER_RGB[1]}, ${SPINNER_RGB[2]}, ${clamped.toFixed(3)})`;
                spoke.style.boxShadow = glow > 0.02
                    ? `0 0 ${Math.round(6 + (glow * 3))}px rgba(${SPINNER_RGB[0]}, ${SPINNER_RGB[1]}, ${SPINNER_RGB[2]}, ${(0.10 + (glow * 0.24)).toFixed(3)})`
                    : 'none';
            };

            const setActive = (enabled) => {
                const nextActive = !!enabled;
                if (nextActive === active) {
                    return;
                }
                active = nextActive;
                startedAtMs = nextActive ? performance.now() : 0;
                if (!nextActive) {
                    for (const spoke of spokes) {
                        setSpoke(spoke, MIN_ALPHA * 0.9);
                    }
                }
            };

            const frame = (nowMs) => {
                if (!active || startedAtMs <= 0 || !spokes.length) {
                    return;
                }
                const progress = ((nowMs - startedAtMs) % PERIOD_MS) / PERIOD_MS;
                const head = progress * SPOKE_COUNT;
                for (let i = 0; i < spokes.length; i += 1) {
                    const trailingDistance = (head - i + SPOKE_COUNT) % SPOKE_COUNT;
                    const normalized = 1 - (trailingDistance / (SPOKE_COUNT - 1));
                    const eased = normalized <= 0
                        ? 0
                        : (normalized * normalized * (3 - (2 * normalized)));
                    const alpha = MIN_ALPHA + ((MAX_ALPHA - MIN_ALPHA) * eased);
                    setSpoke(spokes[i], alpha);
                }
            };

            setActive(false);
            return { setActive, frame };
        };

        // ── App preview (scroll-driven) ──

        const appPreviewRoot = document.getElementById('vn-app-preview');
        if (appPreviewRoot) {
            const appRecordingLabel = document.getElementById('vn-preview-recording-label');
            const appSpinnerRoots = Array.from(appPreviewRoot.querySelectorAll('.vn-mic-spinner, .vn-fly-spinner'));
            const appSpinnerControllers = appSpinnerRoots.map((root) => createShowcaseSpinnerController(root));
            let appTimerId = null;
            let appElapsedSeconds = 0;
            let currentAppState = 'idle';

            const stopAppTimer = () => {
                if (appTimerId) {
                    clearInterval(appTimerId);
                    appTimerId = null;
                }
            };

            const startAppTimer = () => {
                stopAppTimer();
                appElapsedSeconds = 0;
                if (appRecordingLabel) {
                    appRecordingLabel.textContent = formatShowcaseTime(appElapsedSeconds);
                }
                appTimerId = window.setInterval(() => {
                    appElapsedSeconds += 1;
                    if (appRecordingLabel) {
                        appRecordingLabel.textContent = formatShowcaseTime(appElapsedSeconds);
                    }
                }, 1000);
            };

            const setAppState = (nextState) => {
                const state = ['idle', 'listening', 'transcribing'].includes(nextState) ? nextState : 'idle';
                if (state === currentAppState) return;
                currentAppState = state;
                appPreviewRoot.dataset.state = state;
                activateShowcaseContext('app', state);

                const spinnerActive = state === 'transcribing';
                for (const ctrl of appSpinnerControllers) {
                    ctrl.setActive(spinnerActive);
                }

                if (state === 'listening') {
                    startAppTimer();
                    return;
                }

                stopAppTimer();
                if (state === 'transcribing') {
                    if (appRecordingLabel) {
                        appRecordingLabel.textContent = 'Transcribing';
                    }
                    return;
                }

                if (appRecordingLabel) {
                    appRecordingLabel.textContent = 'Tap to record';
                }
            };

            const runAppSpinnerFrame = (nowMs) => {
                for (const ctrl of appSpinnerControllers) {
                    ctrl.frame(nowMs);
                }
                window.requestAnimationFrame(runAppSpinnerFrame);
            };
            window.requestAnimationFrame(runAppSpinnerFrame);

            setAppState('idle');

            // Expose for scrollytelling
            window._vnSetAppState = setAppState;
        }

        // ── Flyout preview (scroll-driven) ──

        const flyoutPreviewRoot = document.getElementById('vn-flyout-preview');
        if (flyoutPreviewRoot) {
            const flyoutTimer = document.getElementById('vn-preview-flyout-timer');
            const flyoutWaveBars = Array.from(flyoutPreviewRoot.querySelectorAll('.vn-fly-wave-bar'));
            const flyoutWaveformController = createShowcaseWaveformController(flyoutWaveBars);
            const flyoutSpinnerRoots = Array.from(flyoutPreviewRoot.querySelectorAll('.vn-mic-spinner, .vn-fly-spinner'));
            const flyoutSpinnerControllers = flyoutSpinnerRoots.map((root) => createShowcaseSpinnerController(root));
            let flyoutTimerId = null;
            let flyoutElapsedSeconds = 0;
            let currentFlyoutState = 'idle';

            const stopFlyoutTimer = () => {
                if (flyoutTimerId) {
                    clearInterval(flyoutTimerId);
                    flyoutTimerId = null;
                }
            };

            const startFlyoutTimer = () => {
                stopFlyoutTimer();
                flyoutElapsedSeconds = 0;
                if (flyoutTimer) {
                    flyoutTimer.textContent = formatShowcaseTime(flyoutElapsedSeconds);
                }
                flyoutTimerId = window.setInterval(() => {
                    flyoutElapsedSeconds += 1;
                    if (flyoutElapsedSeconds >= 600) {
                        flyoutElapsedSeconds = 0;
                    }
                    if (flyoutTimer) {
                        flyoutTimer.textContent = formatShowcaseTime(flyoutElapsedSeconds);
                    }
                }, 1000);
            };

            const setFlyoutState = (nextState) => {
                const state = ['idle', 'listening', 'transcribing'].includes(nextState) ? nextState : 'idle';
                if (state === currentFlyoutState) return;
                currentFlyoutState = state;
                flyoutPreviewRoot.dataset.state = state;
                activateShowcaseContext('flyout', state);
                flyoutWaveformController.setMode(state);

                const spinnerActive = state === 'transcribing';
                for (const ctrl of flyoutSpinnerControllers) {
                    ctrl.setActive(spinnerActive);
                }

                if (state === 'listening') {
                    startFlyoutTimer();
                    return;
                }

                stopFlyoutTimer();
                if (flyoutTimer) {
                    flyoutTimer.textContent = '0:00';
                }
            };

            const runFlyoutFrame = (nowMs) => {
                flyoutWaveformController.frame(nowMs);
                for (const ctrl of flyoutSpinnerControllers) {
                    ctrl.frame(nowMs);
                }
                window.requestAnimationFrame(runFlyoutFrame);
            };
            window.requestAnimationFrame(runFlyoutFrame);

            setFlyoutState('idle');

            // Expose for scrollytelling
            window._vnSetFlyoutState = setFlyoutState;
        }

        // ── Scrollytelling: drive state from scroll position ──

        const scrollySections = Array.from(document.querySelectorAll('.vn-scrolly-section'));
        if (scrollySections.length) {
            const stateSetters = {
                app: window._vnSetAppState || (() => { }),
                flyout: window._vnSetFlyoutState || (() => { }),
            };
            const scrollyMobileMq = window.matchMedia('(max-width: 768px)');

            const activeStateByTarget = { app: 'idle', flyout: 'idle' };
            const dividerTrackTopPct = 15;
            const dividerTrackSpanPct = 70;
            const dividerMarkersBySection = new WeakMap();

            const setupScrollyDividerMarkers = (section, target, steps) => {
                if (dividerMarkersBySection.has(section)) {
                    return;
                }
                const divider = section.querySelector('.vn-scrolly-divider');
                if (!divider || steps.length < 2) {
                    dividerMarkersBySection.set(section, []);
                    return;
                }

                const stepWeights = steps.map((step) => {
                    const weight = Number(step.dataset.scrollyWeight);
                    return Number.isFinite(weight) && weight > 0 ? weight : 1;
                });
                const totalWeight = stepWeights.reduce((sum, weight) => sum + weight, 0) || steps.length;
                let cumulativeWeight = 0;
                const markers = [];
                for (let i = 0; i < steps.length - 1; i += 1) {
                    cumulativeWeight += stepWeights[i];
                    const ratio = clamp01(cumulativeWeight / totalWeight);
                    const marker = document.createElement('span');
                    marker.className = 'vn-scrolly-divider-stage-mark';
                    const topPct = dividerTrackTopPct + (ratio * dividerTrackSpanPct);
                    marker.style.setProperty('--vn-divider-mark-top', `${topPct.toFixed(2)}%`);
                    divider.appendChild(marker);
                    markers.push({ element: marker, ratio });
                }
                dividerMarkersBySection.set(section, markers);
            };

            const setScrollyDividerProgress = (section, progress, isVisible) => {
                const divider = section.querySelector('.vn-scrolly-divider');
                if (!divider) {
                    return;
                }
                const clamped = clamp01(progress);
                const fillPct = (clamped * dividerTrackSpanPct).toFixed(2);
                const iconTopPct = (dividerTrackTopPct + (clamped * dividerTrackSpanPct)).toFixed(2);
                divider.style.setProperty('--vn-divider-fill-pct', `${fillPct}%`);
                divider.style.setProperty('--vn-divider-icon-top', `${iconTopPct}%`);
                divider.style.setProperty('--vn-divider-visible', isVisible ? '1' : '0');

                const markers = dividerMarkersBySection.get(section) || [];
                let nextMarkerSet = false;
                for (const markerInfo of markers) {
                    const isPassed = clamped >= markerInfo.ratio;
                    markerInfo.element.classList.toggle('is-passed', isPassed);
                    const isNext = !isPassed && !nextMarkerSet;
                    markerInfo.element.classList.toggle('is-next', isNext);
                    if (isNext) {
                        nextMarkerSet = true;
                    }
                }
            };

            const updateScrollyState = (section) => {
                const target = section.classList.contains('vn-scrolly-section--app') ? 'app' : 'flyout';
                const steps = Array.from(section.querySelectorAll('.vn-scrolly-step'));
                if (!steps.length) return;
                const isMobileScrolly = scrollyMobileMq.matches;
                setupScrollyDividerMarkers(section, target, steps);

                const viewportHeight = window.innerHeight || document.documentElement.clientHeight || 0;
                const sectionRect = section.getBoundingClientRect();
                if (sectionRect.bottom <= 0) {
                    setScrollyDividerProgress(section, 1, false);
                    return;
                }
                if (sectionRect.top >= viewportHeight) {
                    setScrollyDividerProgress(section, 0, false);
                    return;
                }

                let stepIndex = steps.length - 1;
                if (isMobileScrolly) {
                    setScrollyDividerProgress(section, 0, false);
                    const focusY = viewportHeight * 0.62;
                    const tailPx = Number(section.dataset.scrollyTail || 0);
                    const effectiveHeight = Math.max(sectionRect.height - Math.max(tailPx, 0), 1);
                    const progress = (focusY - sectionRect.top) / effectiveHeight;
                    const clampedProgress = Math.max(0, Math.min(0.9999, progress));
                    const stepWeights = steps.map((step) => {
                        const weight = Number(step.dataset.scrollyWeight);
                        return Number.isFinite(weight) && weight > 0 ? weight : 1;
                    });
                    const totalWeight = stepWeights.reduce((sum, weight) => sum + weight, 0) || steps.length;
                    const weightedProgress = clampedProgress * totalWeight;
                    let cumulativeWeight = 0;
                    for (let i = 0; i < steps.length; i += 1) {
                        cumulativeWeight += stepWeights[i];
                        if (weightedProgress < cumulativeWeight) {
                            stepIndex = i;
                            break;
                        }
                    }
                } else {
                    const focusY = viewportHeight * 0.5;
                    const tailPx = Number(section.dataset.scrollyTail || 0);
                    const effectiveHeight = Math.max(sectionRect.height - Math.max(tailPx, 0), 1);
                    const progress = (focusY - sectionRect.top) / effectiveHeight;
                    const clampedProgress = Math.max(0, Math.min(0.9999, progress));
                    setScrollyDividerProgress(section, clampedProgress, true);
                    const stepWeights = steps.map((step) => {
                        const weight = Number(step.dataset.scrollyWeight);
                        return Number.isFinite(weight) && weight > 0 ? weight : 1;
                    });
                    const totalWeight = stepWeights.reduce((sum, weight) => sum + weight, 0) || steps.length;
                    const weightedProgress = clampedProgress * totalWeight;
                    let cumulativeWeight = 0;
                    for (let i = 0; i < steps.length; i += 1) {
                        cumulativeWeight += stepWeights[i];
                        if (weightedProgress < cumulativeWeight) {
                            stepIndex = i;
                            break;
                        }
                    }
                }
                const activeStep = steps[stepIndex];
                if (!activeStep) return;

                const state = activeStep.dataset.scrollyState;
                if (state && state !== activeStateByTarget[target]) {
                    activeStateByTarget[target] = state;
                    stateSetters[target](state);

                    // Update context items
                    const allItems = document.querySelectorAll(`.vn-context-item[data-target="${target}"]`);
                    for (const item of allItems) {
                        item.classList.remove('is-active');
                    }
                    const contextItem = section.querySelector(`.vn-context-item[data-target="${target}"][data-state="${state}"]`);
                    if (contextItem) {
                        contextItem.classList.add('is-active');
                    }
                }
            };

            // Use scroll event with throttling
            let ticking = false;
            const onScroll = () => {
                if (!ticking) {
                    window.requestAnimationFrame(() => {
                        for (const section of scrollySections) {
                            updateScrollyState(section);
                        }
                        ticking = false;
                    });
                    ticking = true;
                }
            };

            window.addEventListener('scroll', onScroll, { passive: true });
            window.addEventListener('resize', onScroll);

            // Initial update
            for (const section of scrollySections) {
                updateScrollyState(section);
            }
        }
    </script>
</body>

</html>
